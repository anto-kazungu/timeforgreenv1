<div class="dashboard-container">
  <div class="header">
    <div class="profile-section" (click)="goToProfile()">
      <div class="profile-avatar">
        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60'%3E%3Ccircle cx='30' cy='30' r='30' fill='%23FFD700'/%3E%3C/svg%3E" alt="Profile">
      </div>
      <div class="user-info">
        <span class="user-name">{{ userName }}</span>
        <span class="user-level">
          <span class="material-symbols-outlined level-icon-small">{{ levelIcon }}</span>
          Level {{ userLevel }} - {{ levelName }}
        </span>
      </div>
    </div>
    
    <div class="points-badge">
      <div class="points-info">
        <span class="points-label">Green Points</span>
        <span class="points-value">{{ greenPoints }}</span>
      </div>
    </div>
  </div>

  <div class="content">
    <div class="welcome-section">
      <h1 class="greeting">Welcome back, {{ userName }}! ðŸ‘‹</h1>
      <p class="tagline">
        Your generosity is creating positive environmental impact worldwide
        <span class="material-symbols-outlined tagline-icon">favorite</span>
      </p>
    </div>

    <div class="stats-grid">
      <div class="stat-card" *ngFor="let stat of stats">
        <div class="stat-icon" [style.color]="stat.color">
          <span class="material-symbols-outlined">{{ stat.icon }}</span>
        </div>
        <div class="stat-info">
          <span class="stat-value">{{ stat.value }}</span>
          <span class="stat-label">{{ stat.label }}</span>
        </div>
      </div>
    </div>

    <div class="main-content">
      <!-- Recent Donations Section -->
      <div class="section">
        <div class="section-header">
          <h2><span class="material-symbols-outlined">payments</span> Recent Donations</h2>
          <button class="action-btn" (click)="navigateTo('/donor/history')">
            <span class="material-symbols-outlined">visibility</span>
            View All
          </button>
        </div>

        <div class="donations-list" *ngIf="recentDonations.length > 0">
          <div class="donation-card" *ngFor="let donation of recentDonations">
            <div class="donation-header">
              <div class="donation-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                <span class="material-symbols-outlined">volunteer_activism</span>
              </div>
              <div class="donation-info">
                <h4>{{ donation.projectTitle }}</h4>
                <p class="donation-date">{{ donation.date | date:'medium' }}</p>
              </div>
              <div class="donation-amount">
                <span class="amount">Ksh {{ donation.amount.toLocaleString() }}</span>
                <span class="status-badge" [class]="donation.status">{{ donation.status }}</span>
              </div>
            </div>
          </div>
        </div>

        <div class="empty-state" *ngIf="recentDonations.length === 0">
          <div class="empty-icon-wrapper">
            <span class="material-symbols-outlined empty-icon">volunteer_activism</span>
          </div>
          <h3>Start Your Impact Journey</h3>
          <p>Be the first to make a difference! Browse environmental projects and support causes that matter to you.</p>
          <button class="create-btn" (click)="navigateTo('/donor/projects')">
            <span class="material-symbols-outlined">search</span>
            Discover Projects
          </button>
        </div>
      </div>

      <!-- Active Projects Section -->
      <div class="section">
        <div class="section-header">
          <h2><span class="material-symbols-outlined">campaign</span> Active Projects</h2>
          <button class="action-btn" (click)="navigateTo('/donor/projects')">
            <span class="material-symbols-outlined">add_circle</span>
            Browse More
          </button>
        </div>

        <div class="projects-grid" *ngIf="activeProjects.length > 0">
          <div class="project-card" *ngFor="let project of activeProjects" (click)="viewProject(project.id)">
            <div class="project-image" [style.background]="project.gradient">
              <span class="material-symbols-outlined project-icon">campaign</span>
            </div>
            <div class="project-content">
              <h3>{{ project.title }}</h3>
              <p class="project-description">{{ project.description }}</p>
              <div class="project-progress">
                <div class="progress-info">
                  <span>Ksh {{ project.currentAmount.toLocaleString() }} raised</span>
                  <span>{{ (project.currentAmount / project.targetAmount * 100).toFixed(0) }}%</span>
                </div>
                <div class="progress-bar">
                  <div class="progress-fill" [style.width.%]="(project.currentAmount / project.targetAmount * 100)"></div>
                </div>
                <span class="goal-text">Goal: Ksh {{ project.targetAmount.toLocaleString() }}</span>
              </div>
              <div class="project-meta">
                <span class="donors-count">
                  <span class="material-symbols-outlined">people</span>
                  {{ project.donorCount }} donors
                </span>
                <span class="days-left">{{ project.daysLeft }} days left</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Community Needs Section -->
      <div class="section">
        <div class="section-header">
          <h2><span class="material-symbols-outlined">help</span> Community Needs</h2>
          <button class="action-btn" (click)="navigateTo('/donor/needs')">
            <span class="material-symbols-outlined">visibility</span>
            View All
          </button>
        </div>

        <div class="needs-list" *ngIf="communityNeeds.length > 0">
          <div class="need-card" *ngFor="let need of communityNeeds" (click)="viewNeed(need.id)">
            <div class="need-header">
              <div class="urgency-badge" [class]="need.urgency">
                {{ need.urgency | titlecase }}
              </div>
              <span class="need-date">{{ need.dateRequested | date:'short' }}</span>
            </div>
            <h4>{{ need.title }}</h4>
            <p class="need-description">{{ need.description }}</p>
            <div class="need-details">
              <span class="detail-item">
                <span class="material-symbols-outlined">location_on</span>
                {{ need.communityName }}
              </span>
              <span class="detail-item">
                <span class="material-symbols-outlined">payments</span>
                Ksh {{ need.estimatedCost.toLocaleString() }}
              </span>
            </div>
            <button class="respond-btn" (click)="viewNeed(need.id); $event.stopPropagation()">
              <span class="material-symbols-outlined">volunteer_activism</span>
              Respond to Need
            </button>
          </div>
        </div>

        <div class="empty-state" *ngIf="communityNeeds.length === 0">
          <div class="empty-icon-wrapper">
            <span class="material-symbols-outlined empty-icon">check_circle</span>
          </div>
          <h3>All Caught Up!</h3>
          <p>No urgent community needs at the moment. Check back soon or explore other ways to contribute.</p>
          <button class="create-btn" (click)="navigateTo('/donor/projects')">
            <span class="material-symbols-outlined">campaign</span>
            View All Projects
          </button>
        </div>
      </div>

      <!-- Impact Summary Section -->
      <div class="section impact-section">
        <div class="section-header">
          <h2><span class="material-symbols-outlined">analytics</span> Your Impact</h2>
          <button class="action-btn" (click)="navigateTo('/donor/impact')">
            <span class="material-symbols-outlined">open_in_new</span>
            Full Report
          </button>
        </div>

        <div class="impact-grid">
          <div class="impact-card">
            <div class="impact-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
              <span class="material-symbols-outlined">park</span>
            </div>
            <div class="impact-info">
              <span class="impact-value">{{ donationImpact.treesPlanted }}</span>
              <span class="impact-label">Trees Planted</span>
            </div>
          </div>
          <div class="impact-card">
            <div class="impact-icon" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
              <span class="material-symbols-outlined">favorite</span>
            </div>
            <div class="impact-info">
              <span class="impact-value">{{ donationImpact.livesImpacted }}</span>
              <span class="impact-label">Lives Impacted</span>
            </div>
          </div>
          <div class="impact-card">
            <div class="impact-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
              <span class="material-symbols-outlined">eco</span>
            </div>
            <div class="impact-info">
              <span class="impact-value">{{ donationImpact.co2Reduced }} tons</span>
              <span class="impact-label">COâ‚‚ Reduced</span>
            </div>
          </div>
          <div class="impact-card">
            <div class="impact-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
              <span class="material-symbols-outlined">recycling</span>
            </div>
            <div class="impact-info">
              <span class="impact-value">{{ donationImpact.wasteRecycled }} kg</span>
              <span class="impact-label">Waste Recycled</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="quick-actions">
      <h2>Quick Actions</h2>
      <div class="actions-grid">
        <button class="action-card" *ngFor="let action of quickActions" (click)="navigateTo(action.route)">
          <span class="material-symbols-outlined action-icon">{{ action.icon }}</span>
          <span class="action-label">{{ action.label }}</span>
        </button>
      </div>
    </div>

    <!-- Climate News Banner -->
    <div class="climate-news-banner" (click)="navigateToClimateNews()">
      <div class="banner-icon">
        <span class="material-symbols-outlined">public</span>
      </div>
      <div class="banner-content">
        <h3>Global Environmental Impact</h3>
        <p>Discover how donations are making a difference worldwide</p>
      </div>
      <div class="banner-action">
        <span class="material-symbols-outlined">arrow_forward</span>
      </div>
    </div>

    <div class="logout-section">
      <button class="logout-btn" (click)="logout()">
        <span class="material-symbols-outlined">logout</span>
        Logout
      </button>
    </div>
  </div>
</div>
