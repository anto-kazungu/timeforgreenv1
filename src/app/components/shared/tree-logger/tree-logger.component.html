<div class="tree-logger-section">
  <div class="section-header">
    <h2>
      <span class="material-symbols-outlined section-icon">park</span>
      Tree Planting Log
    </h2>
    <button class="action-btn" (click)="showTreeForm = !showTreeForm">
      <span class="material-symbols-outlined">{{ showTreeForm ? 'close' : 'add' }}</span>
      {{ showTreeForm ? 'Cancel' : 'Log Trees' }}
    </button>
  </div>

  <!-- Tree Logging Form -->
  <div class="form-card" *ngIf="showTreeForm">
    <form #treeForm="ngForm">
      <div class="form-row">
        <div class="form-group">
          <label>
            <span class="material-symbols-outlined">numbers</span>
            Number of Trees
          </label>
          <input 
            type="number" 
            [(ngModel)]="treesCount" 
            name="treesCount"
            placeholder="How many trees did you plant?"
            min="1"
            required
          />
        </div>
        
        <div class="form-group">
          <label>
            <span class="material-symbols-outlined">calendar_today</span>
            Date Planted
          </label>
          <input 
            type="date" 
            [(ngModel)]="plantingDate" 
            name="plantingDate"
            required
          />
        </div>
      </div>

      <div class="form-group">
        <label>
          <span class="material-symbols-outlined">location_on</span>
          Location
        </label>
        <input 
          type="text" 
          [(ngModel)]="plantingLocation" 
          name="plantingLocation"
          placeholder="Where did you plant the trees?"
          required
        />
      </div>

      <div class="form-group">
        <label>
          <span class="material-symbols-outlined">nature</span>
          Tree Species (Optional)
        </label>
        <input 
          type="text" 
          [(ngModel)]="treeSpecies" 
          name="treeSpecies"
          placeholder="e.g., Oak, Pine, Maple"
        />
      </div>

      <div class="form-group">
        <label>
          <span class="material-symbols-outlined">description</span>
          Notes (Optional)
        </label>
        <textarea 
          [(ngModel)]="plantingNotes" 
          name="plantingNotes"
          placeholder="Add any additional details about your tree planting activity..."
          rows="3"
        ></textarea>
      </div>

      @if (treeLogMessage) {
        <div class="message" [class.success]="treeLogSuccess" [class.error]="!treeLogSuccess">
          <span class="material-symbols-outlined">{{ treeLogSuccess ? 'check_circle' : 'error' }}</span>
          {{ treeLogMessage }}
        </div>
      }

      <div class="form-actions">
        <button type="button" class="cancel-btn" (click)="resetTreeForm()">
          <span class="material-symbols-outlined">refresh</span>
          Reset
        </button>
        <button type="button" class="save-btn" (click)="logTrees()">
          <span class="material-symbols-outlined">save</span>
          Log Trees
        </button>
      </div>
    </form>
  </div>

  <!-- Tree Planting History -->
  <div class="tree-history" *ngIf="treePlantingLogs.length > 0">
    <h3 class="history-title">
      <span class="material-symbols-outlined">history</span>
      Planting History
    </h3>
    <div class="tree-log-grid">
      <div class="tree-log-card" *ngFor="let log of treePlantingLogs">
        <div class="tree-log-header">
          <div class="tree-count-badge">
            <span class="material-symbols-outlined">park</span>
            <span class="tree-count">{{ log.count }} {{ log.count === 1 ? 'Tree' : 'Trees' }}</span>
          </div>
          <span class="log-date">{{ formatDate(log.date) }}</span>
        </div>
        <div class="tree-log-details">
          <div class="detail-item">
            <span class="material-symbols-outlined">location_on</span>
            <span>{{ log.location }}</span>
          </div>
          <div class="detail-item" *ngIf="log.species">
            <span class="material-symbols-outlined">nature</span>
            <span>{{ log.species }}</span>
          </div>
          <div class="detail-item" *ngIf="log.notes">
            <span class="material-symbols-outlined">description</span>
            <span>{{ log.notes }}</span>
          </div>
        </div>
        <div class="tree-log-footer">
          <span class="xp-earned">
            <span class="material-symbols-outlined">stars</span>
            +{{ log.xpEarned }} XP
          </span>
        </div>
      </div>
    </div>
  </div>

  <div class="empty-state" *ngIf="treePlantingLogs.length === 0 && !showTreeForm">
    <span class="material-symbols-outlined empty-icon">park</span>
    <h3>No Trees Logged Yet</h3>
    <p>Start logging your tree planting activities to track your environmental impact!</p>
  </div>
</div>
